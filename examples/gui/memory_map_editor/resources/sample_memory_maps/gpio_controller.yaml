name: "GPIO Controller"
description: "32-channel GPIO controller with configurable pins"
base_address: 0x40000000

registers:
    - name: control
      offset: 0x00
      description: "Main control register"
      fields:
          - name: enable
            bit: 0
            access: rw
            description: "Enable GPIO controller"
          - name: interrupt_enable
            bit: 1
            access: rw
            description: "Enable global interrupts"
          - name: mode
            bits: "[3:2]"
            access: rw
            description: "Operating mode (0=normal, 1=test, 2=low_power)"
          - name: version
            bits: "[31:24]"
            access: ro
            description: "Hardware version"

    - name: status
      offset: 0x04
      description: "Status register"
      fields:
          - name: ready
            bit: 0
            access: ro
            description: "Controller ready"
          - name: error
            bit: 1
            access: ro
            description: "Error condition"
          - name: interrupt_pending
            bit: 2
            access: ro
            description: "Interrupt pending"
          - name: active_pins
            bits: "[15:8]"
            access: ro
            description: "Number of active pins"

    - name: interrupt_mask
      offset: 0x08
      description: "Interrupt mask register"
      fields:
          - name: mask_bits
            bits: "[31:0]"
            access: rw
            description: "Interrupt mask (1=enabled, 0=disabled)"

    - name: gpio_pins
      offset: 0x100
      count: 32
      stride: 4
      description: "GPIO pin configuration array"
      fields:
          - name: value
            bit: 0
            access: rw
            description: "Pin output value"
          - name: direction
            bit: 1
            access: rw
            description: "Pin direction (0=input, 1=output)"
          - name: pull_enable
            bit: 2
            access: rw
            description: "Enable pull resistor"
          - name: pull_up
            bit: 3
            access: rw
            description: "Pull direction (0=down, 1=up)"
          - name: interrupt_enable
            bit: 4
            access: rw
            description: "Enable interrupt for this pin"
          - name: interrupt_type
            bits: "[6:5]"
            access: rw
            description: "Interrupt type (0=level, 1=edge, 2=both)"
