name: "DMA Engine"
description: "Multi-channel DMA engine with descriptor rings"
base_address: 0x50000000

registers:
  - name: global_control
    offset: 0x00
    description: "Global DMA control register"
    fields:
      - name: enable
        bit: 0
        access: rw
        description: "Global DMA enable"
      - name: interrupt_enable
        bit: 1
        access: rw
        description: "Global interrupt enable"
      - name: priority_mode
        bits: "[3:2]"
        access: rw
        description: "Channel priority mode"
      - name: active_channels
        bits: "[15:8]"
        access: ro
        description: "Currently active channels"

  - name: global_status
    offset: 0x04
    description: "Global DMA status register"
    fields:
      - name: busy
        bit: 0
        access: ro
        description: "DMA engine busy"
      - name: error
        bit: 1
        access: ro
        description: "Global error flag"
      - name: channel_done
        bits: "[15:8]"
        access: ro
        description: "Channel completion flags"

  - name: descriptor_rings
    offset: 0x1000
    count: 64
    stride: 16
    description: "DMA descriptor ring entries"
    fields:
      - name: src_addr
        bits: "[31:0]"
        access: rw
        description: "Source address"
      - name: dst_addr
        bits: "[31:0]"
        access: rw
        description: "Destination address (at offset +4)"
      - name: length
        bits: "[23:0]"
        access: rw
        description: "Transfer length"
      - name: control
        bits: "[31:24]"
        access: rw
        description: "Transfer control flags"

  - name: channel_configs
    offset: 0x2000
    count: 8
    stride: 32
    description: "Per-channel configuration registers"
    fields:
      - name: enable
        bit: 0
        access: rw
        description: "Channel enable"
      - name: priority
        bits: "[3:1]"
        access: rw
        description: "Channel priority (0-7)"
      - name: direction
        bit: 4
        access: rw
        description: "Transfer direction"
      - name: increment_src
        bit: 5
        access: rw
        description: "Increment source address"
      - name: increment_dst
        bit: 6
        access: rw
        description: "Increment destination address"
      - name: interrupt_enable
        bit: 7
        access: rw
        description: "Channel interrupt enable"
