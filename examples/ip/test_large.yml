apiVersion: 1.0
vlnv:
  vendor: large.com
  library: test
  name: large_stress_test
  version: 1.0.0

description: Large IP core for stress testing with many clocks, resets, and bus interfaces

# Top-level clock definitions
clocks:
  - name: clk_sys
    physicalPort: CLK_SYS
    frequency: "100 MHz"
  - name: clk_axi
    physicalPort: CLK_AXI
    frequency: "200 MHz"
  - name: clk_ddr
    physicalPort: CLK_DDR
    frequency: "400 MHz"
  - name: clk_eth
    physicalPort: CLK_ETH
    frequency: "125 MHz"
  - name: clk_pcie
    physicalPort: CLK_PCIE
    frequency: "250 MHz"
  - name: clk_usb
    physicalPort: CLK_USB
    frequency: "60 MHz"
  - name: clk_aux
    physicalPort: CLK_AUX
    frequency: "50 MHz"

# Top-level reset definitions
resets:
  - name: rst_sys
    physicalPort: RST_SYS
    polarity: active_low
  - name: rst_axi
    physicalPort: RST_AXI
    polarity: active_low
  - name: rst_ddr
    physicalPort: RST_DDR
    polarity: active_high
  - name: rst_eth
    physicalPort: RST_ETH
    polarity: active_low
  - name: rst_pcie
    physicalPort: RST_PCIE
    polarity: active_high

# Top-level 'data' or 'control' ports
ports:
  - name: irq_out
    direction: out
    physicalPort: IRQ_OUT
    description: Global interrupt request output

# Location of the reusable bus library
useBusLibrary: common/bus_definitions.yml

busInterfaces:
  - name: control_reg
    type: AXI4L
    mode: slave
    physicalPrefix: s_axi_ctrl_
    associatedClock: clk_sys
    associatedReset: rst_sys
  
  - name: dma_control
    type: AXI4L
    mode: slave
    physicalPrefix: s_axi_dma_
    associatedClock: clk_axi
    associatedReset: rst_axi
  
  - name: memory_port
    type: AXI4L # Changed from AXI4 as it is not in library
    mode: master
    physicalPrefix: m_axi_mem_
    associatedClock: clk_ddr
    associatedReset: rst_ddr
  
  - name: data_stream_in
    type: AXIS
    mode: slave
    physicalPrefix: s_axis_data_
    associatedClock: clk_eth
    associatedReset: rst_eth
  
  - name: data_stream_out
    type: AXIS
    mode: master
    physicalPrefix: m_axis_data_
    associatedClock: clk_eth
    associatedReset: rst_eth
  
  - name: pcie_interface
    type: AXI4L # Changed from AXI4
    mode: master
    physicalPrefix: m_axi_pcie_
    associatedClock: clk_pcie
    associatedReset: rst_pcie
  
  - name: usb_data_in
    type: AXIS
    mode: slave
    physicalPrefix: s_axis_usb_
    associatedClock: clk_usb
    associatedReset: rst_sys
  
  - name: usb_data_out
    type: AXIS
    mode: master
    physicalPrefix: m_axis_usb_
    associatedClock: clk_usb
    associatedReset: rst_sys

parameters:
  - name: DATA_WIDTH
    dataType: integer
    defaultValue: 32
    description: "Width of data bus"
  
  - name: ADDR_WIDTH
    dataType: integer
    defaultValue: 32
    description: "Width of address bus"
  
  - name: FIFO_DEPTH
    dataType: integer
    defaultValue: 1024
    description: "Depth of internal FIFO"
  
  - name: ENABLE_DMA
    dataType: boolean
    defaultValue: true
    description: "Enable DMA functionality"
